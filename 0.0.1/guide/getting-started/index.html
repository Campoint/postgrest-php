<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
            <title>Documentation</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/template.js"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -three phpdocumentor-sidebar">
                    <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">documentation</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/getting-started/index.html#getting-started" class="">Getting started</a>
</h4>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/guides/index.html#guides" class="">Guides</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="guide/guides/client/index.html#client" class="">Client</a>
                
            </li>
                    <li>
                <a href="guide/guides/request-builder/index.html#requestbuilder" class="">RequestBuilder</a>
                
            </li>
                    <li>
                <a href="guide/guides/response/index.html#response" class="">Response</a>
                
            </li>
            </ul>

                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="guide/changelog/index.html#changelog" class="">Changelog</a>
</h4>

                        </section>
                <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="namespaces/postgrestphp.html" class="">PostgrestPhp</a>
</h4>
    <ul class="phpdocumentor-list">
                    <li>
                <a href="namespaces/postgrestphp-client.html" class="">Client</a>
                
            </li>
                    <li>
                <a href="namespaces/postgrestphp-requestbuilder.html" class="">RequestBuilder</a>
                
            </li>
                    <li>
                <a href="namespaces/postgrestphp-response.html" class="">Response</a>
                
            </li>
            </ul>

                        </section>
                <section class="phpdocumentor-sidebar__category">
            <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                                    <h4 class="phpdocumentor-sidebar__root-namespace">
    <a href="packages/PostgrestPhp.html" class="">PostgrestPhp</a>
</h4>

                        </section>
            
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="graphs/classes.html">Class Diagram</a></h3>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -nine phpdocumentor-content">
                                        <div class="section" id="getting-started">
    <h1>Getting started</h1>

            <p>PostgREST client for PHP. This library provides a synchronous and
asynchronous interface to PostgREST.</p>
            <div class="contents"><ul class="phpdocumentor-list"><li class="toc-item"><a href="guide/getting-started/index.html#installation">Installation</a><ul class="section-level-1"><li class="toc-item"><a href="guide/getting-started/index.html#requirements">Requirements</a></li><li class="toc-item"><a href="guide/getting-started/index.html#instructions">Instructions</a></li></ul></li><li class="toc-item"><a href="guide/getting-started/index.html#basic-usage">Basic usage</a><ul class="section-level-1"><li class="toc-item"><a href="guide/getting-started/index.html#create-a-client">Create a client</a><ul class="section-level-1"><li class="toc-item"><a href="guide/getting-started/index.html#sync">Sync</a></li><li class="toc-item"><a href="guide/getting-started/index.html#async">Async</a></li></ul></li><li class="toc-item"><a href="guide/getting-started/index.html#select">Select</a></li><li class="toc-item"><a href="guide/getting-started/index.html#insert">Insert</a></li><li class="toc-item"><a href="guide/getting-started/index.html#upsert">Upsert</a></li><li class="toc-item"><a href="guide/getting-started/index.html#update">Update</a></li><li class="toc-item"><a href="guide/getting-started/index.html#delete">Delete</a></li><li class="toc-item"><a href="guide/getting-started/index.html#call-stored-procedure">Call stored procedure</a></li></ul></li><li class="toc-item"><a href="guide/getting-started/index.html#advanced-usage">Advanced usage</a></li><li class="toc-item"><a href="guide/getting-started/index.html#creating-an-issue">Creating an issue</a></li><li class="toc-item"><a href="guide/getting-started/index.html#local-development-testing">Local development &amp; testing</a><ul class="section-level-1"><li class="toc-item"><a href="guide/getting-started/index.html#local-development">Local development</a></li><li class="toc-item"><a href="guide/getting-started/index.html#testing">Testing</a></li></ul></li></ul></div>
            <div class="section" id="installation">
    <h2>Installation</h2>

            <div class="section" id="requirements">
    <h3>Requirements</h3>

            

<ul>
    <li class="dash">PHP &gt;= 8.1</li>

    <li class="dash">react/http &gt;= 1.5</li>

    <li class="dash">react/async &gt;= 4.0</li>

    <li class="dash">PostgreSQL &gt;= 12</li>

    <li class="dash">PostgREST &gt;= 9</li>

</ul>

    </div>

            <div class="section" id="instructions">
    <h3>Instructions</h3>

            <pre><code class="language-">    composer require campoint/postgrest-php
</code></pre>
    </div>

    </div>

            <div class="section" id="basic-usage">
    <h2>Basic usage</h2>

            <div class="section" id="create-a-client">
    <h3>Create a client</h3>

            <p>This library provides both an async and sync client. Under the hood we
use ReactPHP to dispatch requests and the only difference between the
sync and async client is, that the sync client calls <code>await()</code> on the
<code>Promise</code> for you. You can optionally pass a configured <code>Browser</code>
object to the client, but the <code>baseUrl</code> and <code>timeout</code> parameters
will be overwritten.</p>
            <div class="section" id="sync">
    <h4>Sync</h4>

            <p>Create a client for synchronous environments:</p>
            <pre><code class="language-php">$clientAuthConfig = new ClientAuthConfig(
    authArguments: [
        &#039;email&#039; =&gt; &#039;test@acme.dev&#039;,
        &#039;pass&#039; =&gt; &#039;password&#039;,
    ],
);
$client = new PostgrestSyncClient(
    &#039;http://localhost:8080&#039;,
    5,
    clientAuthConfig: $clientAuthConfig
);
try {
    $client-&gt;auth();
} catch (FailedAuthException $e) {
   // do something
}</code></pre>
    </div>

            <div class="section" id="async">
    <h4>Async</h4>

            <p>Create a client for asynchronous environments:</p>
            <pre><code class="language-php">$clientAuthConfig = new ClientAuthConfig(
    authArguments: [
        &#039;email&#039; =&gt; &#039;test@acme.dev&#039;,
        &#039;pass&#039; =&gt; &#039;password&#039;,
    ],
);
$client = new PostgrestAsyncClient(
    &#039;http://localhost:8080&#039;,
    5,
    (new Browser(null, $loop)),
    $clientAuthConfig
);
$client-&gt;auth()-&gt;then(
    function () {
        // do something on success
    },
    function (FailedAuthException $e) {
        // do something on rejection
    }
);</code></pre>
    </div>

    </div>

            <div class="section" id="select">
    <h3>Select</h3>

            <p>Select data from any table, in any schema and apply arbitrary filters:</p>
            <pre><code class="language-php">$response = $client-&gt;run(
    $client-&gt;from(&#039;schema_name&#039;, &#039;table_name&#039;)
        -&gt;select(&#039;column_a&#039;, &#039;column_b&#039;)
        -&gt;eq(&#039;column_c&#039;, &#039;foo&#039;)
        -&gt;gt(&#039;column_d&#039;, 0.5)
        -&gt;in(&#039;column_e&#039;, 1, 2, 3)
);</code></pre>
    </div>

            <div class="section" id="insert">
    <h3>Insert</h3>

            <p>Insert data into any table, in any schema:</p>
            <pre><code class="language-php">$response = $client-&gt;run(
    $client-&gt;from(&#039;schema_name&#039;, &#039;table_name&#039;)
        -&gt;insert(
            [
                [
                    &#039;column_a&#039; =&gt; &#039;foo&#039;
                ],
                [
                    &#039;column_a&#039; =&gt; &#039;bar&#039;
                ]
            ]
        )
);</code></pre>
    </div>

            <div class="section" id="upsert">
    <h3>Upsert</h3>

            <p>Upsert data into any table, in any schema:</p>
            <pre><code class="language-php">$response = $client-&gt;run(
    $client-&gt;from(&#039;schema_name&#039;, &#039;table_name&#039;)
        -&gt;upsert(
            [
                [
                    &#039;column_a&#039; =&gt; &#039;foo&#039;
                ],
                [
                    &#039;column_a&#039; =&gt; &#039;bar&#039;
                ]
            ],
            duplicateResolution: DuplicateResolution::MERGE
        )
);</code></pre>
    </div>

            <div class="section" id="update">
    <h3>Update</h3>

            <p>Update any row in any table, in any schema with arbitrary filters:</p>
            <pre><code class="language-php">$response = $client-&gt;run(
    $client-&gt;from(&#039;schema_name&#039;, &#039;table_name&#039;)
        -&gt;update([&#039;column_a&#039; =&gt; &#039;foo&#039;])
        -&gt;eq(&#039;column_a&#039;, &#039;bar&#039;)
);</code></pre>
    </div>

            <div class="section" id="delete">
    <h3>Delete</h3>

            <p>Delete any row in any table, in any schema with arbitrary filters:</p>
            <pre><code class="language-php">$response = $client-&gt;run(
    $client-&gt;from(&#039;schema_name&#039;, &#039;table_name&#039;)
        -&gt;delete()
        -&gt;eq(&#039;column_a&#039;, &#039;bar&#039;)
);</code></pre>
    </div>

            <div class="section" id="call-stored-procedure">
    <h3>Call stored procedure</h3>

            <p>Call any stored procedure with arbitrary arguments:</p>
            <pre><code class="language-php">$response = $client-&gt;call(
    &#039;foobar&#039;,
    [
        &#039;arg1&#039; =&gt; &#039;foo&#039;,
        &#039;arg2&#039; =&gt; &#039;bar&#039;
    ],
    &#039;schema_name&#039;
);</code></pre>
    </div>

    </div>

            <div class="section" id="advanced-usage">
    <h2>Advanced usage</h2>

            <p>If you need further documentation on how to use this library, refer to
the documentation located <a href="https://campoint.github.io/postgrest-php/latest">here</a>.</p>
    </div>

            <div class="section" id="creating-an-issue">
    <h2>Creating an issue</h2>

            <p>When encountering a bug with this library, feel free to open a new
issue. To improve the understanding of your problem, you should fork
this repository and append a new failing test case which represents the
bug. If needed, create new testing databases in the
<code>testing_db/initdb</code> path. Reference your new test in the issue. Issues
which report bugs but have no test cases attached to it, will be
probably ignored. Please also supply the used PostgREST and PostgreSQL
versions to bug reports, to ease the task of reproducing your issue.
Create feature request issues only if you have the intent to implement
them yourself.</p>
    </div>

            <div class="section" id="local-development-testing">
    <h2>Local development &amp; testing</h2>

            <p>When developing or testing the client, you can use the pre-configured
<code>docker-compose</code> environment to run both PostgreSQL and PostgREST. The
<code>docker-compose.yml</code> file contains the services to start PostgreSQL
versions 12 to 15 and PostgREST at version 9 to 11. To start the local
environment, simply run:</p>
            <pre><code class="language-">    docker-compose up postgresql14 postgrest11
</code></pre>
            <p>Once the environment started, you can access PostgREST at port <code>8080</code>
and PostgreSQL at port <code>5432</code>.</p>
            <div class="section" id="local-development">
    <h3>Local development</h3>

            <p>The repository provides a devcontainer which you can use for developing
the client. Development happens only over PR&#039;s because we want to keep
master stable and always usable for new, unreleased features. When
opening a PR against master all necessary checks and tests are executed,
to ensure nothing breaks. To ensure your PR does not fail due to linter
or static analyzer checks, run the following commands before opening the
PR:</p>
            <pre><code class="language-">    composer ci-ready
</code></pre>
    </div>

            <div class="section" id="testing">
    <h3>Testing</h3>

            <p>This client is integration tested using <code>docker-compose</code> to run the
needed dependencies. To run the tests locally, run these steps:</p>
            <pre><code class="language-">    docker-compose up -d postgresql14 postgrest11
    composer test</code></pre>
    </div>

    </div>

    </div>

                            </div>
            <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
        </div>
        <a href="guide/getting-started/index.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-highlight/prism-line-highlight.min.js"></script>
</body>
</html>
